<div id="systems">
    <h2>Systems <div class="right">
            <button ng-click="showdefault()">my default</button>
            <button ng-click="showmepm()" ng-show="showmepmbutton">me as admin</button>
            <button ng-click="clearmepm()" ng-show="!showmepmbutton">all admins</button>
            <button ng-click="showmeres()" ng-show="showmeresbutton">me as owner</button>
            <button ng-click="clearmeres()" ng-show="!showmeresbutton">all owners</button>
            <button ng-click="showfilters=true" ng-show="!showfilters">more filters</button>
            <button ng-click="showfilters=false" ng-show="showfilters">hide filters</button></div>
    </h2>
    <div class="smaller">

        <table ng-show="showfilters">
            <tr class="header">
                <td colspan="5">Filters<div class="right"><button class="clearbtn" ng-click="clearall()"
                            ng-show="showfilters">clear all</button></div>
                </td>
            </tr>
            <tr class="header">
                <td class="filter-container">Unit<div class="right"><button ng-click="systemsearch.buname=[]"
                            ng-show="showfilters">clear</button></div>
                </td>
                <td class="filter-container">Admin<div class="right"><button ng-click="systemsearch.pmname=[]"
                            ng-show="showfilters">clear</button></div>
                </td>
                <td class="filter-container">Owner<div class="right"><button ng-click="systemsearch.poname=[]"
                            ng-show="showfilters">clear</button></div>
                </td>
                <td class="filter-container">
                </td>
                <td class="filter-container">
                </td>
            </tr>

            <tr class="filtertd">
                <td>
                    <select class="multiple-select" multiple="multiple" ng-multiple="true" ng-change="saveSearch()"
                        ng-model="systemsearch.buname"
                        ng-options="bu.name as bu.name for bu in bus | orderBy: 'name'"></select>
                </td>
                <td>
                    <select class="multiple-select" multiple="multiple" ng-multiple="true" ng-change="saveSearch()"
                        ng-model="systemsearch.pmname">
                        <option ng-repeat="u in users | filter: {source: true} | orderBy:'name'" value="{{u.name}}">
                            {{u.name}}</option>
                    </select>
                </td>
                <td>
                    <select class="multiple-select" multiple="multiple" ng-multiple="true" ng-change="saveSearch()"
                        ng-model="systemsearch.poname">
                        <option ng-repeat="u in users | filter: {source: true} | orderBy:'name'" value="{{u.name}}">
                            {{u.name}}</option>
                    </select>
                </td>
                <td>
                    
                </td>
                <td>
                    
                </td>
            </tr>
            

            <tr class="header">
                <td colspan="5">Order by</td>
            </tr>
            <tr>
                <td colspan="5">
                    <select ng-model="porderparam" ng-init="porderparam='buname'">
                        <option value="buname">Unit</option>
                        <option value="pmname">Admin</option>
                        <option value="poname">Owner</option>  
                    </select>
                    <select ng-model="porderparam2" ng-init="porderparam2='pmname'">
                        <option value="buname">Unit</option>
                        <option value="pmname">Admin</option>
                        <option value="poname">Owner</option>   
                    </select>
                    <select ng-model="porderparam3" ng-init="porderparam3='poname'">
                        <option value="buname">Unit</option>
                        <option value="pmname">Admin</option>
                        <option value="poname">Owner</option>   
                    </select>

                    <div class="right">
                        <button ng-click="saveFilters()">Save as default</button>
                    </div>

                </td>
            </tr>
        </table>

        <div class="overview">
            <table class="tablelist" ng-if="systems.length > 0">
                <tr class="header">
                    <td>System</td>
                    <td>BU</td>
                    <td>System Admin</td>
                    <td>System Owner</td>
                </tr>
                </tr>
                <tr ng-repeat="system in systems | multiFilter:systemsearch | orderBy:[porderparam, porderparam2, porderparam3]"
                    ng-click="goToSystem(system._id.$oid)" class="link">
                    <td class="{{system.status}}"><b>{{system.title}}</td>
                    <td>{{system.buname}}</td>
                    <td>{{system.pmname}}</td>
                    <td>{{system.poname}}</td>    
                </tr>
            </table>
        </div>
    </div>
</div>